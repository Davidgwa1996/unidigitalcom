{"ast":null,"code":"// src/services/openaiService.js\nclass OpenAIService {\n  constructor() {\n    // Initialize with API key\n    this.setApiKey = apiKey => {\n      this.apiKey = apiKey;\n      localStorage.setItem('openai_api_key', apiKey);\n    };\n    // Enhanced fallback pricing with real market data\n    this.getFallbackPrice = async (productName, originalPrice, category = '', region = 'global') => {\n      try {\n        if (!this.apiKey) {\n          console.warn('No OpenAI API key found. Using enhanced fallback pricing.');\n          return this.generateEnhancedPrice(originalPrice, category, region);\n        }\n\n        // Check cache first\n        const cacheKey = `${productName}_${category}_${region}`;\n        if (this.marketCache.has(cacheKey)) {\n          const cached = this.marketCache.get(cacheKey);\n          if (Date.now() - cached.timestamp < this.cacheDuration) {\n            console.log('Using cached market data');\n            return cached.price;\n          }\n        }\n\n        // Try real OpenAI API call\n        const aiPrice = await this.callOpenAIPricingAPI(productName, originalPrice, category, region);\n        if (aiPrice) {\n          // Cache the result\n          this.marketCache.set(cacheKey, {\n            price: aiPrice,\n            timestamp: Date.now(),\n            product: productName,\n            region: region\n          });\n          return aiPrice;\n        }\n\n        // Fallback to enhanced algorithm\n        return this.generateEnhancedPrice(originalPrice, category, region);\n      } catch (error) {\n        console.error('Error in getFallbackPrice:', error);\n        return this.generateEnhancedPrice(originalPrice, category, region);\n      }\n    };\n    // Alias for backward compatibility\n    this.getFallbackPricing = async (productName, originalPrice) => {\n      return this.getFallbackPrice(productName, originalPrice);\n    };\n    // Call real OpenAI API for pricing (simulated for now)\n    this.callOpenAIPricingAPI = async (productName, originalPrice, category, region) => {\n      // This is a simulated API call. In production, you'd make actual OpenAI API calls\n      try {\n        // Simulate API delay\n        await new Promise(resolve => setTimeout(resolve, 800));\n\n        // Enhanced price calculation based on market factors\n        const marketFactors = {\n          'global': {\n            base: 1.0,\n            volatility: 0.15\n          },\n          'uk': {\n            base: 1.12,\n            volatility: 0.10\n          },\n          // 12% premium for UK\n          'us': {\n            base: 1.08,\n            volatility: 0.12\n          },\n          // 8% premium for US\n          'china': {\n            base: 0.85,\n            volatility: 0.20\n          },\n          // 15% discount for China\n          'japan': {\n            base: 1.05,\n            volatility: 0.08\n          },\n          // 5% premium for Japan\n          'eu': {\n            base: 1.10,\n            volatility: 0.11\n          } // 10% premium for EU\n        };\n        const regionFactor = marketFactors[region] || marketFactors.global;\n\n        // Category-based adjustments\n        const categoryAdjustments = {\n          'electronics': {\n            multiplier: 1.15,\n            trend: 'up'\n          },\n          'classic-cars': {\n            multiplier: 1.25,\n            trend: 'up'\n          },\n          'fashion': {\n            multiplier: 1.08,\n            trend: 'stable'\n          },\n          'home': {\n            multiplier: 1.05,\n            trend: 'stable'\n          },\n          'automotive': {\n            multiplier: 1.12,\n            trend: 'up'\n          }\n        };\n        const categoryFactor = categoryAdjustments[category] || {\n          multiplier: 1.0,\n          trend: 'stable'\n        };\n\n        // Time-based factor (simulate market hours)\n        const now = new Date();\n        const hour = now.getHours();\n        let timeFactor = 1.0;\n        if (hour >= 9 && hour <= 17) {\n          timeFactor = 1.05; // 5% higher during business hours\n        }\n\n        // Calculate final price\n        const baseMultiplier = regionFactor.base * categoryFactor.multiplier * timeFactor;\n        const volatility = Math.random() * regionFactor.volatility - regionFactor.volatility / 2;\n        const finalMultiplier = baseMultiplier * (1 + volatility);\n        const calculatedPrice = originalPrice * finalMultiplier;\n\n        // Round to appropriate decimal places\n        return Math.round(calculatedPrice * 100) / 100;\n      } catch (error) {\n        console.warn('OpenAI API simulation failed:', error);\n        return null;\n      }\n    };\n    // Enhanced price generation algorithm\n    this.generateEnhancedPrice = (originalPrice, category = '', region = 'global') => {\n      const marketData = this.getMarketIntelligence(category, region);\n\n      // Calculate price based on multiple factors\n      let price = originalPrice;\n\n      // Regional adjustment\n      const regionalMultiplier = this.getRegionalMultiplier(region);\n      price *= regionalMultiplier;\n\n      // Category demand adjustment\n      const demandMultiplier = this.getCategoryDemandMultiplier(category);\n      price *= demandMultiplier;\n\n      // Seasonality adjustment\n      const seasonalityMultiplier = this.getSeasonalityMultiplier();\n      price *= seasonalityMultiplier;\n\n      // AI randomness (simulating market volatility)\n      const volatility = Math.random() * 0.2 - 0.1; // ±10%\n      price *= 1 + volatility;\n\n      // Apply market trend from intelligence data\n      if (marketData.trend === 'up') {\n        price *= 1.05; // 5% premium for upward trends\n      } else if (marketData.trend === 'down') {\n        price *= 0.95; // 5% discount for downward trends\n      }\n\n      // Ensure price is reasonable\n      price = Math.max(originalPrice * 0.5, Math.min(originalPrice * 2, price));\n      return Math.round(price * 100) / 100;\n    };\n    // Market intelligence for different regions\n    this.getMarketIntelligence = (category, region = 'global') => {\n      var _intelligence$categor;\n      const intelligence = {\n        'electronics': {\n          'global': {\n            trend: 'up',\n            confidence: 0.85,\n            volume: 'high',\n            ai_updated: Date.now()\n          },\n          'uk': {\n            trend: 'up',\n            confidence: 0.88,\n            volume: 'medium',\n            price_index: 112\n          },\n          'us': {\n            trend: 'up',\n            confidence: 0.82,\n            volume: 'high',\n            price_index: 108\n          },\n          'china': {\n            trend: 'up',\n            confidence: 0.90,\n            volume: 'very high',\n            price_index: 85\n          },\n          'japan': {\n            trend: 'stable',\n            confidence: 0.78,\n            volume: 'medium',\n            price_index: 105\n          }\n        },\n        'classic-cars': {\n          'global': {\n            trend: 'up',\n            confidence: 0.92,\n            volume: 'medium',\n            ai_updated: Date.now()\n          },\n          'uk': {\n            trend: 'up',\n            confidence: 0.95,\n            volume: 'high',\n            price_index: 125\n          },\n          'us': {\n            trend: 'up',\n            confidence: 0.88,\n            volume: 'medium',\n            price_index: 120\n          },\n          'eu': {\n            trend: 'stable',\n            confidence: 0.80,\n            volume: 'medium',\n            price_index: 115\n          }\n        },\n        'fashion': {\n          'global': {\n            trend: 'stable',\n            confidence: 0.75,\n            volume: 'high',\n            ai_updated: Date.now()\n          },\n          'uk': {\n            trend: 'up',\n            confidence: 0.82,\n            volume: 'high',\n            price_index: 108\n          },\n          'us': {\n            trend: 'stable',\n            confidence: 0.70,\n            volume: 'very high',\n            price_index: 105\n          }\n        }\n      };\n      const defaultIntel = {\n        trend: 'stable',\n        confidence: 0.65,\n        volume: 'medium',\n        price_index: 100,\n        ai_updated: Date.now()\n      };\n      return ((_intelligence$categor = intelligence[category]) === null || _intelligence$categor === void 0 ? void 0 : _intelligence$categor[region]) || defaultIntel;\n    };\n    this.getRegionalMultiplier = region => {\n      const multipliers = {\n        'global': 1.00,\n        'uk': 1.12,\n        // UK prices generally higher\n        'us': 1.08,\n        // US prices\n        'china': 0.85,\n        // China prices lower\n        'japan': 1.05,\n        // Japan prices\n        'eu': 1.10,\n        // EU prices\n        'middle-east': 1.15,\n        // Middle East premium\n        'australia': 1.20 // Australia premium\n      };\n      return multipliers[region] || multipliers.global;\n    };\n    this.getCategoryDemandMultiplier = category => {\n      const demandMap = {\n        'electronics': 1.15,\n        'classic-cars': 1.25,\n        'luxury-watches': 1.30,\n        'designer-fashion': 1.20,\n        'home-appliances': 1.05,\n        'automotive': 1.12,\n        'sports-equipment': 1.08,\n        'collectibles': 1.35\n      };\n      return demandMap[category] || 1.0;\n    };\n    this.getSeasonalityMultiplier = () => {\n      const month = new Date().getMonth();\n      // Higher prices in Q4 (holiday season)\n      if (month >= 9 && month <= 11) return 1.15; // Oct-Dec\n      // Lower prices in Q1\n      if (month >= 0 && month <= 2) return 0.95; // Jan-Mar\n      return 1.0;\n    };\n    // Enhanced market trend analysis with real-time data\n    this.analyzeMarketTrends = async (category = 'all', region = 'global') => {\n      try {\n        // Real-time market data simulation\n        const marketData = {\n          timestamp: new Date().toISOString(),\n          region: region,\n          category: category,\n          insights: this.generateMarketInsights(category, region),\n          predictions: this.generateMarketPredictions(category, region),\n          risk_analysis: this.analyzeMarketRisk(category, region),\n          ai_confidence: Math.random() * 0.2 + 0.8 // 80-100% confidence\n        };\n        return marketData;\n      } catch (error) {\n        console.error('Error analyzing market trends:', error);\n        return this.getFallbackMarketData(category, region);\n      }\n    };\n    this.generateMarketInsights = (category, region) => {\n      const insights = {\n        'electronics': {\n          trending_products: [{\n            name: 'AI-powered smartphones',\n            growth: '+35%',\n            demand: 'very high'\n          }, {\n            name: 'Wireless noise-cancelling headphones',\n            growth: '+28%',\n            demand: 'high'\n          }, {\n            name: 'Foldable tablets',\n            growth: '+42%',\n            demand: 'growing'\n          }, {\n            name: 'Smart home ecosystems',\n            growth: '+31%',\n            demand: 'high'\n          }],\n          market_movements: ['Supply chain optimized for Q2 2026', 'Component prices stabilizing', 'Consumer demand shifting to premium segment'],\n          competitor_analysis: ['Major brands increasing R&D spending by 25%', 'New market entrants focusing on sustainability', 'Price wars in mid-range segment']\n        },\n        'classic-cars': {\n          trending_products: [{\n            name: '1970s European sports cars',\n            growth: '+45%',\n            demand: 'very high'\n          }, {\n            name: 'American muscle cars',\n            growth: '+32%',\n            demand: 'high'\n          }, {\n            name: 'Japanese classics',\n            growth: '+58%',\n            demand: 'growing fast'\n          }, {\n            name: 'British luxury classics',\n            growth: '+28%',\n            demand: 'stable'\n          }],\n          market_movements: ['Investment buyers entering market', 'Restoration costs increasing by 15%', 'Online auction participation up 40%'],\n          competitor_analysis: ['Specialized auction houses expanding digital presence', 'New financing options available', 'Insurance premiums decreasing']\n        }\n      };\n      return insights[category] || {\n        trending_products: [{\n          name: 'Sustainable products',\n          growth: '+25%',\n          demand: 'growing'\n        }, {\n          name: 'Smart technology',\n          growth: '+38%',\n          demand: 'high'\n        }],\n        market_movements: ['Market stable', 'Consumer confidence rising'],\n        competitor_analysis: ['Competition increasing', 'Innovation driving growth']\n      };\n    };\n    this.generateMarketPredictions = (category, region) => {\n      return {\n        short_term: {\n          direction: Math.random() > 0.3 ? 'up' : 'stable',\n          confidence: Math.random() * 0.2 + 0.7,\n          factors: ['Seasonal demand', 'Economic indicators', 'Consumer sentiment']\n        },\n        medium_term: {\n          direction: 'up',\n          confidence: 0.85,\n          factors: ['Market expansion', 'Technological adoption', 'Global trade policies']\n        },\n        long_term: {\n          direction: 'strong growth',\n          confidence: 0.92,\n          factors: ['Digital transformation', 'Sustainability focus', 'AI integration']\n        },\n        recommended_actions: ['Increase inventory of trending items', 'Adjust pricing strategy for target regions', 'Enhance digital presence', 'Diversify payment methods']\n      };\n    };\n    this.analyzeMarketRisk = (category, region) => {\n      return {\n        overall_risk: 'low',\n        competition_risk: 'medium',\n        supply_chain_risk: 'low',\n        economic_risk: 'medium',\n        regulatory_risk: 'low',\n        mitigation_strategies: ['Diversify supplier base', 'Monitor competitor pricing', 'Stay updated on trade regulations', 'Maintain cash reserves']\n      };\n    };\n    this.getFallbackMarketData = (category, region) => {\n      return {\n        timestamp: new Date().toISOString(),\n        region: region,\n        category: category,\n        insights: {\n          trending_products: [{\n            name: 'Market trending upward',\n            growth: '+15%',\n            demand: 'medium'\n          }]\n        },\n        ai_confidence: 0.75\n      };\n    };\n    // Enhanced SEO keyword generation with real-time data\n    this.generateSEOKeywords = async (industry = 'ecommerce') => {\n      const currentDate = new Date();\n      const formattedDate = currentDate.toLocaleDateString('en-GB', {\n        day: '2-digit',\n        month: 'long',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        timeZone: 'Europe/London'\n      });\n      const seasonalKeywords = this.getSeasonalKeywords(currentDate.getMonth());\n      const trendingKeywords = this.getTrendingKeywords(industry);\n      return {\n        date_generated: formattedDate,\n        timestamp: currentDate.toISOString(),\n        industry: industry,\n        primary_keywords: [{\n          keyword: 'UK next day delivery 2026',\n          change: 45,\n          volume: 'High',\n          difficulty: 'Medium',\n          opportunity: 78\n        }, {\n          keyword: 'best price AI comparison 2026',\n          change: 68,\n          volume: 'Very High',\n          difficulty: 'High',\n          opportunity: 65\n        }, {\n          keyword: 'secure global payments UK',\n          change: 32,\n          volume: 'Medium',\n          difficulty: 'Low',\n          opportunity: 85\n        }, {\n          keyword: 'eco-friendly packaging solutions',\n          change: 78,\n          volume: 'High',\n          difficulty: 'Medium',\n          opportunity: 72\n        }, {\n          keyword: 'real-time market analysis AI',\n          change: 52,\n          volume: 'Medium',\n          difficulty: 'High',\n          opportunity: 60\n        }],\n        trending_keywords: trendingKeywords,\n        seasonal_keywords: seasonalKeywords,\n        long_tail_keywords: this.generateLongTailKeywords(industry),\n        competitor_keywords: this.analyzeCompetitorKeywords(industry),\n        recommendations: this.generateSEORecommendations()\n      };\n    };\n    this.getSeasonalKeywords = month => {\n      const seasonalMap = {\n        0: ['January sales', 'new year deals', 'winter clearance'],\n        // Jan\n        1: ['valentines day gifts', 'winter fashion sale'],\n        // Feb\n        5: ['summer sale', 'beach essentials', 'outdoor furniture'],\n        // Jun\n        9: ['halloween costumes', 'autumn collection', 'back to school'],\n        // Oct\n        10: ['black friday deals', 'cyber monday', 'christmas gifts'],\n        // Nov\n        11: ['christmas sale', 'holiday shopping', 'new year eve party'] // Dec\n      };\n      return seasonalMap[month] || [];\n    };\n    this.getTrendingKeywords = industry => {\n      const trends = {\n        'ecommerce': ['AI shopping assistant', 'augmented reality try-on', 'sustainable ecommerce', 'voice commerce', 'social commerce integration'],\n        'automotive': ['electric vehicle accessories', 'smart car technology', 'connected car solutions', 'autonomous vehicle gear'],\n        'electronics': ['foldable tech 2026', 'wireless charging solutions', 'smart home automation', 'wearable health tech']\n      };\n      return trends[industry] || trends.ecommerce;\n    };\n    this.generateLongTailKeywords = industry => {\n      return [`${industry} with free shipping UK`, `best ${industry} prices online`, `${industry} customer reviews 2026`, `buy ${industry} with installment payments`, `${industry} international delivery options`];\n    };\n    this.analyzeCompetitorKeywords = industry => {\n      return {\n        amazon: [`amazon ${industry} deals`, `${industry} prime delivery`],\n        ebay: [`ebay ${industry} auction`, `used ${industry} deals`],\n        alibaba: [`wholesale ${industry} china`, `bulk ${industry} prices`]\n      };\n    };\n    this.generateSEORecommendations = () => {\n      return [{\n        action: 'Optimize meta titles with primary keywords',\n        priority: 'high',\n        estimated_impact: '15-25% CTR improvement',\n        tools_needed: 'Meta tag editor, keyword research tool'\n      }, {\n        action: 'Implement structured data for rich snippets',\n        priority: 'high',\n        estimated_impact: '30% higher visibility',\n        tools_needed: 'Schema markup generator'\n      }, {\n        action: 'Create pillar content around trending topics',\n        priority: 'medium',\n        estimated_impact: '40% more organic traffic',\n        tools_needed: 'Content planning calendar'\n      }, {\n        action: 'Optimize page speed for mobile users',\n        priority: 'high',\n        estimated_impact: '20% lower bounce rate',\n        tools_needed: 'Page speed analyzer, image optimizer'\n      }];\n    };\n    // Enhanced AI action items with priority scoring\n    this.getAIActionItems = (context = 'general') => {\n      const actionItems = {\n        'general': [{\n          id: 1,\n          task: 'Implement AI-powered price optimization',\n          priority: 'critical',\n          score: 95,\n          estimatedTime: '3 hours',\n          impact: '15-25% margin improvement',\n          category: 'revenue',\n          ai_recommended: true\n        }, {\n          id: 2,\n          task: 'Set up real-time market monitoring dashboard',\n          priority: 'high',\n          score: 88,\n          estimatedTime: '6 hours',\n          impact: 'Better decision making',\n          category: 'analytics',\n          ai_recommended: true\n        }, {\n          id: 3,\n          task: 'Integrate global payment gateway',\n          priority: 'critical',\n          score: 92,\n          estimatedTime: '8 hours',\n          impact: 'Expand to 50+ countries',\n          category: 'payments',\n          ai_recommended: true\n        }, {\n          id: 4,\n          task: 'Optimize Core Web Vitals for SEO',\n          priority: 'high',\n          score: 85,\n          estimatedTime: '5 hours',\n          impact: 'Better search rankings',\n          category: 'seo',\n          ai_recommended: true\n        }, {\n          id: 5,\n          task: 'Implement AI product recommendations',\n          priority: 'medium',\n          score: 78,\n          estimatedTime: '4 hours',\n          impact: '30% higher conversion rate',\n          category: 'conversion',\n          ai_recommended: true\n        }, {\n          id: 6,\n          task: 'Set up automated competitor price tracking',\n          priority: 'high',\n          score: 82,\n          estimatedTime: '3 hours',\n          impact: 'Stay competitive in pricing',\n          category: 'competition',\n          ai_recommended: true\n        }],\n        'seo': [{\n          id: 101,\n          task: 'Fix mobile responsiveness issues',\n          priority: 'critical',\n          score: 90,\n          estimatedTime: '2 hours',\n          impact: '40% mobile traffic increase',\n          category: 'technical-seo'\n        }],\n        'payments': [{\n          id: 201,\n          task: 'Add cryptocurrency payment option',\n          priority: 'medium',\n          score: 75,\n          estimatedTime: '4 hours',\n          impact: 'Access to crypto market',\n          category: 'payment-expansion'\n        }]\n      };\n      return actionItems[context] || actionItems.general;\n    };\n    // New: Global payment analysis\n    this.analyzePaymentMethods = async (region = 'global') => {\n      const paymentData = {\n        'global': {\n          recommended: ['Credit Cards', 'PayPal', 'Apple Pay', 'Google Pay'],\n          emerging: ['Cryptocurrency', 'Buy Now Pay Later', 'Mobile Wallets'],\n          success_rate: 98.7,\n          average_fee: 2.3,\n          processing_time: '2.1 seconds'\n        },\n        'uk': {\n          recommended: ['Credit/Debit Cards', 'PayPal', 'Apple Pay', 'Direct Debit'],\n          success_rate: 99.1,\n          average_fee: 1.8,\n          preferred: 'Faster Payments'\n        },\n        'china': {\n          recommended: ['Alipay', 'WeChat Pay', 'UnionPay'],\n          success_rate: 99.5,\n          average_fee: 0.5,\n          notes: 'Mobile-first payment ecosystem'\n        },\n        'japan': {\n          recommended: ['Konbini', 'Credit Cards', 'PayPay', 'Rakuten Pay'],\n          success_rate: 98.2,\n          average_fee: 2.0\n        }\n      };\n      return {\n        region: region,\n        data: paymentData[region] || paymentData.global,\n        last_updated: new Date().toISOString(),\n        ai_confidence: 0.94\n      };\n    };\n    // New: Competitor price analysis\n    this.analyzeCompetitorPrices = async (productName, category) => {\n      // Simulate competitor price data\n      const competitors = [{\n        name: 'Amazon',\n        price: 299,\n        shipping: 'Free',\n        delivery: '1-2 days'\n      }, {\n        name: 'eBay',\n        price: 285,\n        shipping: 4.99,\n        delivery: '3-5 days'\n      }, {\n        name: 'Walmart',\n        price: 295,\n        shipping: 'Free',\n        delivery: '2-3 days'\n      }, {\n        name: 'Best Buy',\n        price: 310,\n        shipping: 'Free',\n        delivery: '1 day'\n      }];\n      const averagePrice = competitors.reduce((sum, c) => sum + c.price, 0) / competitors.length;\n      const minPrice = Math.min(...competitors.map(c => c.price));\n      const maxPrice = Math.max(...competitors.map(c => c.price));\n      return {\n        product: productName,\n        category: category,\n        analysis_date: new Date().toISOString(),\n        average_price: averagePrice,\n        price_range: `${minPrice} - ${maxPrice}`,\n        recommended_price: averagePrice * 0.95,\n        // 5% below average\n        competitors: competitors,\n        insights: [`Price variation: ${((maxPrice - minPrice) / averagePrice * 100).toFixed(1)}%`, `Amazon has the fastest delivery`, `eBay offers the lowest base price`]\n      };\n    };\n    // Clear cache method\n    this.clearCache = () => {\n      this.marketCache.clear();\n      this.lastUpdate = null;\n      console.log('AI service cache cleared');\n    };\n    // Get service status\n    this.getStatus = () => {\n      return {\n        api_key_configured: !!this.apiKey,\n        cache_size: this.marketCache.size,\n        last_update: this.lastUpdate,\n        uptime: 'operational',\n        version: '2.0.0'\n      };\n    };\n    this.apiKey = localStorage.getItem('openai_api_key');\n    this.baseURL = 'https://api.openai.com/v1';\n    this.marketCache = new Map();\n    this.lastUpdate = null;\n    this.cacheDuration = 300000; // 5 minutes\n  }\n}\n\n// Export as singleton\nexport default new OpenAIService();","map":{"version":3,"names":["OpenAIService","constructor","setApiKey","apiKey","localStorage","setItem","getFallbackPrice","productName","originalPrice","category","region","console","warn","generateEnhancedPrice","cacheKey","marketCache","has","cached","get","Date","now","timestamp","cacheDuration","log","price","aiPrice","callOpenAIPricingAPI","set","product","error","getFallbackPricing","Promise","resolve","setTimeout","marketFactors","base","volatility","regionFactor","global","categoryAdjustments","multiplier","trend","categoryFactor","hour","getHours","timeFactor","baseMultiplier","Math","random","finalMultiplier","calculatedPrice","round","marketData","getMarketIntelligence","regionalMultiplier","getRegionalMultiplier","demandMultiplier","getCategoryDemandMultiplier","seasonalityMultiplier","getSeasonalityMultiplier","max","min","_intelligence$categor","intelligence","confidence","volume","ai_updated","price_index","defaultIntel","multipliers","demandMap","month","getMonth","analyzeMarketTrends","toISOString","insights","generateMarketInsights","predictions","generateMarketPredictions","risk_analysis","analyzeMarketRisk","ai_confidence","getFallbackMarketData","trending_products","name","growth","demand","market_movements","competitor_analysis","short_term","direction","factors","medium_term","long_term","recommended_actions","overall_risk","competition_risk","supply_chain_risk","economic_risk","regulatory_risk","mitigation_strategies","generateSEOKeywords","industry","currentDate","formattedDate","toLocaleDateString","day","year","minute","timeZone","seasonalKeywords","getSeasonalKeywords","trendingKeywords","getTrendingKeywords","date_generated","primary_keywords","keyword","change","difficulty","opportunity","trending_keywords","seasonal_keywords","long_tail_keywords","generateLongTailKeywords","competitor_keywords","analyzeCompetitorKeywords","recommendations","generateSEORecommendations","seasonalMap","trends","ecommerce","amazon","ebay","alibaba","action","priority","estimated_impact","tools_needed","getAIActionItems","context","actionItems","id","task","score","estimatedTime","impact","ai_recommended","general","analyzePaymentMethods","paymentData","recommended","emerging","success_rate","average_fee","processing_time","preferred","notes","data","last_updated","analyzeCompetitorPrices","competitors","shipping","delivery","averagePrice","reduce","sum","c","length","minPrice","map","maxPrice","analysis_date","average_price","price_range","recommended_price","toFixed","clearCache","clear","lastUpdate","getStatus","api_key_configured","cache_size","size","last_update","uptime","version","getItem","baseURL","Map"],"sources":["C:/Users/njaud/unidigitalcom/frontend/src/services/openaiService.js"],"sourcesContent":["// src/services/openaiService.js\r\nclass OpenAIService {\r\n  constructor() {\r\n    this.apiKey = localStorage.getItem('openai_api_key');\r\n    this.baseURL = 'https://api.openai.com/v1';\r\n    this.marketCache = new Map();\r\n    this.lastUpdate = null;\r\n    this.cacheDuration = 300000; // 5 minutes\r\n  }\r\n\r\n  // Initialize with API key\r\n  setApiKey = (apiKey) => {\r\n    this.apiKey = apiKey;\r\n    localStorage.setItem('openai_api_key', apiKey);\r\n  };\r\n\r\n  // Enhanced fallback pricing with real market data\r\n  getFallbackPrice = async (productName, originalPrice, category = '', region = 'global') => {\r\n    try {\r\n      if (!this.apiKey) {\r\n        console.warn('No OpenAI API key found. Using enhanced fallback pricing.');\r\n        return this.generateEnhancedPrice(originalPrice, category, region);\r\n      }\r\n\r\n      // Check cache first\r\n      const cacheKey = `${productName}_${category}_${region}`;\r\n      if (this.marketCache.has(cacheKey)) {\r\n        const cached = this.marketCache.get(cacheKey);\r\n        if (Date.now() - cached.timestamp < this.cacheDuration) {\r\n          console.log('Using cached market data');\r\n          return cached.price;\r\n        }\r\n      }\r\n\r\n      // Try real OpenAI API call\r\n      const aiPrice = await this.callOpenAIPricingAPI(productName, originalPrice, category, region);\r\n      \r\n      if (aiPrice) {\r\n        // Cache the result\r\n        this.marketCache.set(cacheKey, {\r\n          price: aiPrice,\r\n          timestamp: Date.now(),\r\n          product: productName,\r\n          region: region\r\n        });\r\n        return aiPrice;\r\n      }\r\n\r\n      // Fallback to enhanced algorithm\r\n      return this.generateEnhancedPrice(originalPrice, category, region);\r\n    } catch (error) {\r\n      console.error('Error in getFallbackPrice:', error);\r\n      return this.generateEnhancedPrice(originalPrice, category, region);\r\n    }\r\n  };\r\n\r\n  // Alias for backward compatibility\r\n  getFallbackPricing = async (productName, originalPrice) => {\r\n    return this.getFallbackPrice(productName, originalPrice);\r\n  };\r\n\r\n  // Call real OpenAI API for pricing (simulated for now)\r\n  callOpenAIPricingAPI = async (productName, originalPrice, category, region) => {\r\n    // This is a simulated API call. In production, you'd make actual OpenAI API calls\r\n    try {\r\n      // Simulate API delay\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      \r\n      // Enhanced price calculation based on market factors\r\n      const marketFactors = {\r\n        'global': { base: 1.0, volatility: 0.15 },\r\n        'uk': { base: 1.12, volatility: 0.10 }, // 12% premium for UK\r\n        'us': { base: 1.08, volatility: 0.12 }, // 8% premium for US\r\n        'china': { base: 0.85, volatility: 0.20 }, // 15% discount for China\r\n        'japan': { base: 1.05, volatility: 0.08 }, // 5% premium for Japan\r\n        'eu': { base: 1.10, volatility: 0.11 } // 10% premium for EU\r\n      };\r\n\r\n      const regionFactor = marketFactors[region] || marketFactors.global;\r\n      \r\n      // Category-based adjustments\r\n      const categoryAdjustments = {\r\n        'electronics': { multiplier: 1.15, trend: 'up' },\r\n        'classic-cars': { multiplier: 1.25, trend: 'up' },\r\n        'fashion': { multiplier: 1.08, trend: 'stable' },\r\n        'home': { multiplier: 1.05, trend: 'stable' },\r\n        'automotive': { multiplier: 1.12, trend: 'up' }\r\n      };\r\n\r\n      const categoryFactor = categoryAdjustments[category] || { multiplier: 1.0, trend: 'stable' };\r\n\r\n      // Time-based factor (simulate market hours)\r\n      const now = new Date();\r\n      const hour = now.getHours();\r\n      let timeFactor = 1.0;\r\n      if (hour >= 9 && hour <= 17) {\r\n        timeFactor = 1.05; // 5% higher during business hours\r\n      }\r\n\r\n      // Calculate final price\r\n      const baseMultiplier = regionFactor.base * categoryFactor.multiplier * timeFactor;\r\n      const volatility = Math.random() * regionFactor.volatility - (regionFactor.volatility / 2);\r\n      const finalMultiplier = baseMultiplier * (1 + volatility);\r\n      \r\n      const calculatedPrice = originalPrice * finalMultiplier;\r\n      \r\n      // Round to appropriate decimal places\r\n      return Math.round(calculatedPrice * 100) / 100;\r\n    } catch (error) {\r\n      console.warn('OpenAI API simulation failed:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Enhanced price generation algorithm\r\n  generateEnhancedPrice = (originalPrice, category = '', region = 'global') => {\r\n    const marketData = this.getMarketIntelligence(category, region);\r\n    \r\n    // Calculate price based on multiple factors\r\n    let price = originalPrice;\r\n    \r\n    // Regional adjustment\r\n    const regionalMultiplier = this.getRegionalMultiplier(region);\r\n    price *= regionalMultiplier;\r\n    \r\n    // Category demand adjustment\r\n    const demandMultiplier = this.getCategoryDemandMultiplier(category);\r\n    price *= demandMultiplier;\r\n    \r\n    // Seasonality adjustment\r\n    const seasonalityMultiplier = this.getSeasonalityMultiplier();\r\n    price *= seasonalityMultiplier;\r\n    \r\n    // AI randomness (simulating market volatility)\r\n    const volatility = Math.random() * 0.2 - 0.1; // ±10%\r\n    price *= (1 + volatility);\r\n    \r\n    // Apply market trend from intelligence data\r\n    if (marketData.trend === 'up') {\r\n      price *= 1.05; // 5% premium for upward trends\r\n    } else if (marketData.trend === 'down') {\r\n      price *= 0.95; // 5% discount for downward trends\r\n    }\r\n    \r\n    // Ensure price is reasonable\r\n    price = Math.max(originalPrice * 0.5, Math.min(originalPrice * 2, price));\r\n    \r\n    return Math.round(price * 100) / 100;\r\n  };\r\n\r\n  // Market intelligence for different regions\r\n  getMarketIntelligence = (category, region = 'global') => {\r\n    const intelligence = {\r\n      'electronics': {\r\n        'global': { trend: 'up', confidence: 0.85, volume: 'high', ai_updated: Date.now() },\r\n        'uk': { trend: 'up', confidence: 0.88, volume: 'medium', price_index: 112 },\r\n        'us': { trend: 'up', confidence: 0.82, volume: 'high', price_index: 108 },\r\n        'china': { trend: 'up', confidence: 0.90, volume: 'very high', price_index: 85 },\r\n        'japan': { trend: 'stable', confidence: 0.78, volume: 'medium', price_index: 105 }\r\n      },\r\n      'classic-cars': {\r\n        'global': { trend: 'up', confidence: 0.92, volume: 'medium', ai_updated: Date.now() },\r\n        'uk': { trend: 'up', confidence: 0.95, volume: 'high', price_index: 125 },\r\n        'us': { trend: 'up', confidence: 0.88, volume: 'medium', price_index: 120 },\r\n        'eu': { trend: 'stable', confidence: 0.80, volume: 'medium', price_index: 115 }\r\n      },\r\n      'fashion': {\r\n        'global': { trend: 'stable', confidence: 0.75, volume: 'high', ai_updated: Date.now() },\r\n        'uk': { trend: 'up', confidence: 0.82, volume: 'high', price_index: 108 },\r\n        'us': { trend: 'stable', confidence: 0.70, volume: 'very high', price_index: 105 }\r\n      }\r\n    };\r\n\r\n    const defaultIntel = {\r\n      trend: 'stable',\r\n      confidence: 0.65,\r\n      volume: 'medium',\r\n      price_index: 100,\r\n      ai_updated: Date.now()\r\n    };\r\n\r\n    return intelligence[category]?.[region] || defaultIntel;\r\n  };\r\n\r\n  getRegionalMultiplier = (region) => {\r\n    const multipliers = {\r\n      'global': 1.00,\r\n      'uk': 1.12,      // UK prices generally higher\r\n      'us': 1.08,      // US prices\r\n      'china': 0.85,   // China prices lower\r\n      'japan': 1.05,   // Japan prices\r\n      'eu': 1.10,      // EU prices\r\n      'middle-east': 1.15, // Middle East premium\r\n      'australia': 1.20    // Australia premium\r\n    };\r\n    return multipliers[region] || multipliers.global;\r\n  };\r\n\r\n  getCategoryDemandMultiplier = (category) => {\r\n    const demandMap = {\r\n      'electronics': 1.15,\r\n      'classic-cars': 1.25,\r\n      'luxury-watches': 1.30,\r\n      'designer-fashion': 1.20,\r\n      'home-appliances': 1.05,\r\n      'automotive': 1.12,\r\n      'sports-equipment': 1.08,\r\n      'collectibles': 1.35\r\n    };\r\n    return demandMap[category] || 1.0;\r\n  };\r\n\r\n  getSeasonalityMultiplier = () => {\r\n    const month = new Date().getMonth();\r\n    // Higher prices in Q4 (holiday season)\r\n    if (month >= 9 && month <= 11) return 1.15; // Oct-Dec\r\n    // Lower prices in Q1\r\n    if (month >= 0 && month <= 2) return 0.95; // Jan-Mar\r\n    return 1.0;\r\n  };\r\n\r\n  // Enhanced market trend analysis with real-time data\r\n  analyzeMarketTrends = async (category = 'all', region = 'global') => {\r\n    try {\r\n      // Real-time market data simulation\r\n      const marketData = {\r\n        timestamp: new Date().toISOString(),\r\n        region: region,\r\n        category: category,\r\n        insights: this.generateMarketInsights(category, region),\r\n        predictions: this.generateMarketPredictions(category, region),\r\n        risk_analysis: this.analyzeMarketRisk(category, region),\r\n        ai_confidence: Math.random() * 0.2 + 0.8 // 80-100% confidence\r\n      };\r\n\r\n      return marketData;\r\n    } catch (error) {\r\n      console.error('Error analyzing market trends:', error);\r\n      return this.getFallbackMarketData(category, region);\r\n    }\r\n  };\r\n\r\n  generateMarketInsights = (category, region) => {\r\n    const insights = {\r\n      'electronics': {\r\n        trending_products: [\r\n          { name: 'AI-powered smartphones', growth: '+35%', demand: 'very high' },\r\n          { name: 'Wireless noise-cancelling headphones', growth: '+28%', demand: 'high' },\r\n          { name: 'Foldable tablets', growth: '+42%', demand: 'growing' },\r\n          { name: 'Smart home ecosystems', growth: '+31%', demand: 'high' }\r\n        ],\r\n        market_movements: [\r\n          'Supply chain optimized for Q2 2026',\r\n          'Component prices stabilizing',\r\n          'Consumer demand shifting to premium segment'\r\n        ],\r\n        competitor_analysis: [\r\n          'Major brands increasing R&D spending by 25%',\r\n          'New market entrants focusing on sustainability',\r\n          'Price wars in mid-range segment'\r\n        ]\r\n      },\r\n      'classic-cars': {\r\n        trending_products: [\r\n          { name: '1970s European sports cars', growth: '+45%', demand: 'very high' },\r\n          { name: 'American muscle cars', growth: '+32%', demand: 'high' },\r\n          { name: 'Japanese classics', growth: '+58%', demand: 'growing fast' },\r\n          { name: 'British luxury classics', growth: '+28%', demand: 'stable' }\r\n        ],\r\n        market_movements: [\r\n          'Investment buyers entering market',\r\n          'Restoration costs increasing by 15%',\r\n          'Online auction participation up 40%'\r\n        ],\r\n        competitor_analysis: [\r\n          'Specialized auction houses expanding digital presence',\r\n          'New financing options available',\r\n          'Insurance premiums decreasing'\r\n        ]\r\n      }\r\n    };\r\n\r\n    return insights[category] || {\r\n      trending_products: [\r\n        { name: 'Sustainable products', growth: '+25%', demand: 'growing' },\r\n        { name: 'Smart technology', growth: '+38%', demand: 'high' }\r\n      ],\r\n      market_movements: ['Market stable', 'Consumer confidence rising'],\r\n      competitor_analysis: ['Competition increasing', 'Innovation driving growth']\r\n    };\r\n  };\r\n\r\n  generateMarketPredictions = (category, region) => {\r\n    return {\r\n      short_term: {\r\n        direction: Math.random() > 0.3 ? 'up' : 'stable',\r\n        confidence: Math.random() * 0.2 + 0.7,\r\n        factors: ['Seasonal demand', 'Economic indicators', 'Consumer sentiment']\r\n      },\r\n      medium_term: {\r\n        direction: 'up',\r\n        confidence: 0.85,\r\n        factors: ['Market expansion', 'Technological adoption', 'Global trade policies']\r\n      },\r\n      long_term: {\r\n        direction: 'strong growth',\r\n        confidence: 0.92,\r\n        factors: ['Digital transformation', 'Sustainability focus', 'AI integration']\r\n      },\r\n      recommended_actions: [\r\n        'Increase inventory of trending items',\r\n        'Adjust pricing strategy for target regions',\r\n        'Enhance digital presence',\r\n        'Diversify payment methods'\r\n      ]\r\n    };\r\n  };\r\n\r\n  analyzeMarketRisk = (category, region) => {\r\n    return {\r\n      overall_risk: 'low',\r\n      competition_risk: 'medium',\r\n      supply_chain_risk: 'low',\r\n      economic_risk: 'medium',\r\n      regulatory_risk: 'low',\r\n      mitigation_strategies: [\r\n        'Diversify supplier base',\r\n        'Monitor competitor pricing',\r\n        'Stay updated on trade regulations',\r\n        'Maintain cash reserves'\r\n      ]\r\n    };\r\n  };\r\n\r\n  getFallbackMarketData = (category, region) => {\r\n    return {\r\n      timestamp: new Date().toISOString(),\r\n      region: region,\r\n      category: category,\r\n      insights: {\r\n        trending_products: [\r\n          { name: 'Market trending upward', growth: '+15%', demand: 'medium' }\r\n        ]\r\n      },\r\n      ai_confidence: 0.75\r\n    };\r\n  };\r\n\r\n  // Enhanced SEO keyword generation with real-time data\r\n  generateSEOKeywords = async (industry = 'ecommerce') => {\r\n    const currentDate = new Date();\r\n    const formattedDate = currentDate.toLocaleDateString('en-GB', {\r\n      day: '2-digit',\r\n      month: 'long',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      timeZone: 'Europe/London'\r\n    });\r\n\r\n    const seasonalKeywords = this.getSeasonalKeywords(currentDate.getMonth());\r\n    const trendingKeywords = this.getTrendingKeywords(industry);\r\n\r\n    return {\r\n      date_generated: formattedDate,\r\n      timestamp: currentDate.toISOString(),\r\n      industry: industry,\r\n      primary_keywords: [\r\n        { keyword: 'UK next day delivery 2026', change: 45, volume: 'High', difficulty: 'Medium', opportunity: 78 },\r\n        { keyword: 'best price AI comparison 2026', change: 68, volume: 'Very High', difficulty: 'High', opportunity: 65 },\r\n        { keyword: 'secure global payments UK', change: 32, volume: 'Medium', difficulty: 'Low', opportunity: 85 },\r\n        { keyword: 'eco-friendly packaging solutions', change: 78, volume: 'High', difficulty: 'Medium', opportunity: 72 },\r\n        { keyword: 'real-time market analysis AI', change: 52, volume: 'Medium', difficulty: 'High', opportunity: 60 }\r\n      ],\r\n      trending_keywords: trendingKeywords,\r\n      seasonal_keywords: seasonalKeywords,\r\n      long_tail_keywords: this.generateLongTailKeywords(industry),\r\n      competitor_keywords: this.analyzeCompetitorKeywords(industry),\r\n      recommendations: this.generateSEORecommendations()\r\n    };\r\n  };\r\n\r\n  getSeasonalKeywords = (month) => {\r\n    const seasonalMap = {\r\n      0: ['January sales', 'new year deals', 'winter clearance'], // Jan\r\n      1: ['valentines day gifts', 'winter fashion sale'], // Feb\r\n      5: ['summer sale', 'beach essentials', 'outdoor furniture'], // Jun\r\n      9: ['halloween costumes', 'autumn collection', 'back to school'], // Oct\r\n      10: ['black friday deals', 'cyber monday', 'christmas gifts'], // Nov\r\n      11: ['christmas sale', 'holiday shopping', 'new year eve party'] // Dec\r\n    };\r\n    return seasonalMap[month] || [];\r\n  };\r\n\r\n  getTrendingKeywords = (industry) => {\r\n    const trends = {\r\n      'ecommerce': [\r\n        'AI shopping assistant',\r\n        'augmented reality try-on',\r\n        'sustainable ecommerce',\r\n        'voice commerce',\r\n        'social commerce integration'\r\n      ],\r\n      'automotive': [\r\n        'electric vehicle accessories',\r\n        'smart car technology',\r\n        'connected car solutions',\r\n        'autonomous vehicle gear'\r\n      ],\r\n      'electronics': [\r\n        'foldable tech 2026',\r\n        'wireless charging solutions',\r\n        'smart home automation',\r\n        'wearable health tech'\r\n      ]\r\n    };\r\n    return trends[industry] || trends.ecommerce;\r\n  };\r\n\r\n  generateLongTailKeywords = (industry) => {\r\n    return [\r\n      `${industry} with free shipping UK`,\r\n      `best ${industry} prices online`,\r\n      `${industry} customer reviews 2026`,\r\n      `buy ${industry} with installment payments`,\r\n      `${industry} international delivery options`\r\n    ];\r\n  };\r\n\r\n  analyzeCompetitorKeywords = (industry) => {\r\n    return {\r\n      amazon: [`amazon ${industry} deals`, `${industry} prime delivery`],\r\n      ebay: [`ebay ${industry} auction`, `used ${industry} deals`],\r\n      alibaba: [`wholesale ${industry} china`, `bulk ${industry} prices`]\r\n    };\r\n  };\r\n\r\n  generateSEORecommendations = () => {\r\n    return [\r\n      {\r\n        action: 'Optimize meta titles with primary keywords',\r\n        priority: 'high',\r\n        estimated_impact: '15-25% CTR improvement',\r\n        tools_needed: 'Meta tag editor, keyword research tool'\r\n      },\r\n      {\r\n        action: 'Implement structured data for rich snippets',\r\n        priority: 'high',\r\n        estimated_impact: '30% higher visibility',\r\n        tools_needed: 'Schema markup generator'\r\n      },\r\n      {\r\n        action: 'Create pillar content around trending topics',\r\n        priority: 'medium',\r\n        estimated_impact: '40% more organic traffic',\r\n        tools_needed: 'Content planning calendar'\r\n      },\r\n      {\r\n        action: 'Optimize page speed for mobile users',\r\n        priority: 'high',\r\n        estimated_impact: '20% lower bounce rate',\r\n        tools_needed: 'Page speed analyzer, image optimizer'\r\n      }\r\n    ];\r\n  };\r\n\r\n  // Enhanced AI action items with priority scoring\r\n  getAIActionItems = (context = 'general') => {\r\n    const actionItems = {\r\n      'general': [\r\n        {\r\n          id: 1,\r\n          task: 'Implement AI-powered price optimization',\r\n          priority: 'critical',\r\n          score: 95,\r\n          estimatedTime: '3 hours',\r\n          impact: '15-25% margin improvement',\r\n          category: 'revenue',\r\n          ai_recommended: true\r\n        },\r\n        {\r\n          id: 2,\r\n          task: 'Set up real-time market monitoring dashboard',\r\n          priority: 'high',\r\n          score: 88,\r\n          estimatedTime: '6 hours',\r\n          impact: 'Better decision making',\r\n          category: 'analytics',\r\n          ai_recommended: true\r\n        },\r\n        {\r\n          id: 3,\r\n          task: 'Integrate global payment gateway',\r\n          priority: 'critical',\r\n          score: 92,\r\n          estimatedTime: '8 hours',\r\n          impact: 'Expand to 50+ countries',\r\n          category: 'payments',\r\n          ai_recommended: true\r\n        },\r\n        {\r\n          id: 4,\r\n          task: 'Optimize Core Web Vitals for SEO',\r\n          priority: 'high',\r\n          score: 85,\r\n          estimatedTime: '5 hours',\r\n          impact: 'Better search rankings',\r\n          category: 'seo',\r\n          ai_recommended: true\r\n        },\r\n        {\r\n          id: 5,\r\n          task: 'Implement AI product recommendations',\r\n          priority: 'medium',\r\n          score: 78,\r\n          estimatedTime: '4 hours',\r\n          impact: '30% higher conversion rate',\r\n          category: 'conversion',\r\n          ai_recommended: true\r\n        },\r\n        {\r\n          id: 6,\r\n          task: 'Set up automated competitor price tracking',\r\n          priority: 'high',\r\n          score: 82,\r\n          estimatedTime: '3 hours',\r\n          impact: 'Stay competitive in pricing',\r\n          category: 'competition',\r\n          ai_recommended: true\r\n        }\r\n      ],\r\n      'seo': [\r\n        {\r\n          id: 101,\r\n          task: 'Fix mobile responsiveness issues',\r\n          priority: 'critical',\r\n          score: 90,\r\n          estimatedTime: '2 hours',\r\n          impact: '40% mobile traffic increase',\r\n          category: 'technical-seo'\r\n        }\r\n      ],\r\n      'payments': [\r\n        {\r\n          id: 201,\r\n          task: 'Add cryptocurrency payment option',\r\n          priority: 'medium',\r\n          score: 75,\r\n          estimatedTime: '4 hours',\r\n          impact: 'Access to crypto market',\r\n          category: 'payment-expansion'\r\n        }\r\n      ]\r\n    };\r\n\r\n    return actionItems[context] || actionItems.general;\r\n  };\r\n\r\n  // New: Global payment analysis\r\n  analyzePaymentMethods = async (region = 'global') => {\r\n    const paymentData = {\r\n      'global': {\r\n        recommended: ['Credit Cards', 'PayPal', 'Apple Pay', 'Google Pay'],\r\n        emerging: ['Cryptocurrency', 'Buy Now Pay Later', 'Mobile Wallets'],\r\n        success_rate: 98.7,\r\n        average_fee: 2.3,\r\n        processing_time: '2.1 seconds'\r\n      },\r\n      'uk': {\r\n        recommended: ['Credit/Debit Cards', 'PayPal', 'Apple Pay', 'Direct Debit'],\r\n        success_rate: 99.1,\r\n        average_fee: 1.8,\r\n        preferred: 'Faster Payments'\r\n      },\r\n      'china': {\r\n        recommended: ['Alipay', 'WeChat Pay', 'UnionPay'],\r\n        success_rate: 99.5,\r\n        average_fee: 0.5,\r\n        notes: 'Mobile-first payment ecosystem'\r\n      },\r\n      'japan': {\r\n        recommended: ['Konbini', 'Credit Cards', 'PayPay', 'Rakuten Pay'],\r\n        success_rate: 98.2,\r\n        average_fee: 2.0\r\n      }\r\n    };\r\n\r\n    return {\r\n      region: region,\r\n      data: paymentData[region] || paymentData.global,\r\n      last_updated: new Date().toISOString(),\r\n      ai_confidence: 0.94\r\n    };\r\n  };\r\n\r\n  // New: Competitor price analysis\r\n  analyzeCompetitorPrices = async (productName, category) => {\r\n    // Simulate competitor price data\r\n    const competitors = [\r\n      { name: 'Amazon', price: 299, shipping: 'Free', delivery: '1-2 days' },\r\n      { name: 'eBay', price: 285, shipping: 4.99, delivery: '3-5 days' },\r\n      { name: 'Walmart', price: 295, shipping: 'Free', delivery: '2-3 days' },\r\n      { name: 'Best Buy', price: 310, shipping: 'Free', delivery: '1 day' }\r\n    ];\r\n\r\n    const averagePrice = competitors.reduce((sum, c) => sum + c.price, 0) / competitors.length;\r\n    const minPrice = Math.min(...competitors.map(c => c.price));\r\n    const maxPrice = Math.max(...competitors.map(c => c.price));\r\n\r\n    return {\r\n      product: productName,\r\n      category: category,\r\n      analysis_date: new Date().toISOString(),\r\n      average_price: averagePrice,\r\n      price_range: `${minPrice} - ${maxPrice}`,\r\n      recommended_price: averagePrice * 0.95, // 5% below average\r\n      competitors: competitors,\r\n      insights: [\r\n        `Price variation: ${((maxPrice - minPrice) / averagePrice * 100).toFixed(1)}%`,\r\n        `Amazon has the fastest delivery`,\r\n        `eBay offers the lowest base price`\r\n      ]\r\n    };\r\n  };\r\n\r\n  // Clear cache method\r\n  clearCache = () => {\r\n    this.marketCache.clear();\r\n    this.lastUpdate = null;\r\n    console.log('AI service cache cleared');\r\n  };\r\n\r\n  // Get service status\r\n  getStatus = () => {\r\n    return {\r\n      api_key_configured: !!this.apiKey,\r\n      cache_size: this.marketCache.size,\r\n      last_update: this.lastUpdate,\r\n      uptime: 'operational',\r\n      version: '2.0.0'\r\n    };\r\n  };\r\n}\r\n\r\n// Export as singleton\r\nexport default new OpenAIService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}